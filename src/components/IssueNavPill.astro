---
/**
 * Telecomandino: pill flottante per navigazione tra numeri (solo /archivio/[issue]).
 * Stile ispirato alla Astro Dev Toolbar. Senza persist cos√¨ prev/next si aggiornano.
 */
export interface Props {
  prevSlug: string | null;
  nextSlug: string | null;
}

const { prevSlug, nextSlug } = Astro.props;
---

<nav
  class="issue-nav-pill"
  aria-label="Navigazione tra i numeri dell'archivio"
>
  <div class="issue-nav-pill__inner">
    <!-- Freccia sinistra: numero precedente -->
    {prevSlug ? (
      <a
        href={`/archivio/${prevSlug}`}
        class="issue-nav-pill__btn issue-nav-pill__btn--prev"
        aria-label="Numero precedente"
        data-tooltip="Numero precedente"
      >
        <span class="issue-nav-pill__icon issue-nav-pill__icon--left" aria-hidden="true">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 2 L4 6 L8 10" />
          </svg>
        </span>
      </a>
    ) : (
      <span class="issue-nav-pill__btn issue-nav-pill__btn--disabled" aria-hidden="true">
        <span class="issue-nav-pill__icon issue-nav-pill__icon--left">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 2 L4 6 L8 10" />
          </svg>
        </span>
      </span>
    )}

    <!-- Centro: link Archivio -->
    <a href="/archivio" class="issue-nav-pill__center" data-tooltip="Torna all'archivio">
      Archivio
    </a>

    <!-- Freccia destra: numero successivo -->
    {nextSlug ? (
      <a
        href={`/archivio/${nextSlug}`}
        class="issue-nav-pill__btn issue-nav-pill__btn--next"
        aria-label="Numero successivo"
        data-tooltip="Numero successivo"
      >
        <span class="issue-nav-pill__icon issue-nav-pill__icon--right" aria-hidden="true">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 2 L8 6 L4 10" />
          </svg>
        </span>
      </a>
    ) : (
      <span class="issue-nav-pill__btn issue-nav-pill__btn--disabled" aria-hidden="true">
        <span class="issue-nav-pill__icon issue-nav-pill__icon--right">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 2 L8 6 L4 10" />
          </svg>
        </span>
      </span>
    )}
  </div>
</nav>

<style>
  .issue-nav-pill {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 100;
    font-family: 'Raleway', system-ui, -apple-system, sans-serif;
  }

  .issue-nav-pill__inner {
    display: flex;
    align-items: center;
    gap: 0;
    background: #1a1a1a;
    border-radius: 9999px;
    padding: 0.5rem 0.25rem 0.5rem 0.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    min-height: 44px;
  }

  .issue-nav-pill__btn,
  .issue-nav-pill__btn--disabled {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 9999px;
    color: rgba(255, 255, 255, 0.85);
    transition: opacity 0.2s ease, color 0.2s ease, background-color 0.2s ease;
  }

  .issue-nav-pill__btn:hover {
    color: #fff;
    background-color: rgba(255, 255, 255, 0.1);
    opacity: 1;
  }

  .issue-nav-pill__btn--disabled {
    opacity: 0.35;
    cursor: default;
    pointer-events: none;
  }

  .issue-nav-pill__center {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 1.25rem;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.9);
    text-decoration: none;
    transition: opacity 0.2s ease, color 0.2s ease;
  }

  .issue-nav-pill__center:hover {
    color: #fff;
    opacity: 1;
  }

  .issue-nav-pill__icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .issue-nav-pill__icon--right {
    transform: scaleX(1);
  }

  .issue-nav-pill__icon--left {
    transform: scaleX(1);
  }

  /* Tooltip su hover */
  .issue-nav-pill__btn[data-tooltip],
  .issue-nav-pill__center[data-tooltip] {
    position: relative;
  }

  .issue-nav-pill__btn[data-tooltip]::before,
  .issue-nav-pill__center[data-tooltip]::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%) scale(0.95);
    padding: 0.35rem 0.6rem;
    background: #333;
    color: rgba(255, 255, 255, 0.95);
    font-size: 0.7rem;
    font-weight: 500;
    white-space: nowrap;
    border-radius: 6px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease, transform 0.2s ease;
  }

  .issue-nav-pill__btn:hover[data-tooltip]::before,
  .issue-nav-pill__center:hover[data-tooltip]::before {
    opacity: 1;
    transform: translateX(-50%) scale(1);
  }
</style>
